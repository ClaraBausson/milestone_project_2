{"changed":true,"filter":false,"title":"piechart_trial.html","tooltip":"/piechart_trial.html","value":"<!DOCTYPE html>\n<meta charset=\"utf-8\">\n<style>\n    body {\n        font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n        width: 960px;\n        height: 500px;\n        position: relative;\n    }\n\n    svg {\n        width: 100%;\n        height: 100%;\n    }\n\n    path.slice {\n        stroke-width: 2px;\n    }\n\n    polyline {\n        opacity: .3;\n        stroke: black;\n        stroke-width: 2px;\n        fill: none;\n    }\n</style>\n\n<body>\n    <button class=\"randomize\">randomize</button>\n\n    <script src=\"static/js/external/d3.min.js\"></script>\n    <script>\n    \n        var svg = d3.select(\"body\")\n            .append(\"svg\")\n            .append(\"g\")\n\n        svg.append(\"g\")\n            .attr(\"class\", \"slices\");\n        svg.append(\"g\")\n            .attr(\"class\", \"labels\");\n        svg.append(\"g\")\n            .attr(\"class\", \"lines\");\n\n        var width = 500,\n            height = 350,\n            radius = Math.min(width, height) / 2;\n\n        var pie = d3.layout.pie()\n            .sort(null)\n            .value(function(d) {\n                return d.value;\n            });\n\n        var arc = d3.svg.arc()\n            .outerRadius(radius * 0.8)\n            .innerRadius(radius * 0.4);\n\n        var outerArc = d3.svg.arc()\n            .innerRadius(radius * 0.9)\n            .outerRadius(radius * 0.9);\n\n        svg.attr(\"transform\", \"translate(\" + width / 2 + \",\" + height / 2 + \")\");\n\n        var key = function(d) { return d.data.label; };\n\n        var color = d3.scale.ordinal()\n            .domain([\"Lorem ipsum\", \"dolor sit\", \"amet\", \"consectetur\", \"adipisicing\", \"elit\", \"sed\", \"do\", \"eiusmod\", \"tempor\", \"incididunt\"])\n            .range([\"#98abc5\", \"#8a89a6\", \"#7b6888\", \"#6b486b\", \"#a05d56\", \"#d0743c\", \"#ff8c00\"]);\n\n        function randomData() {\n            var labels = color.domain();\n            return labels.map(function(label) {\n                return { label: label, value: Math.random() }\n            });\n        }\n\n        change(randomData());\n\n        d3.select(\".randomize\")\n            .on(\"click\", function() {\n                change(randomData());\n            });\n\n\n        function change(data) {\n\n            /* ------- PIE SLICES -------*/\n            var slice = svg.select(\".slices\").selectAll(\"path.slice\")\n                .data(pie(data), key);\n\n            slice.enter()\n                .insert(\"path\")\n                .style(\"fill\", function(d) { return color(d.data.label); })\n                .attr(\"class\", \"slice\");\n\n            slice\n                .transition().duration(1000)\n                .attrTween(\"d\", function(d) {\n                    this._current = this._current || d;\n                    var interpolate = d3.interpolate(this._current, d);\n                    this._current = interpolate(0);\n                    return function(t) {\n                        return arc(interpolate(t));\n                    };\n                })\n\n            slice.exit()\n                .remove();\n\n            /* ------- TEXT LABELS -------*/\n\n            var text = svg.select(\".labels\").selectAll(\"text\")\n                .data(pie(data), key);\n\n            text.enter()\n                .append(\"text\")\n                .attr(\"dy\", \".35em\")\n                .text(function(d) {\n                    return d.data.label;\n                });\n\n            function midAngle(d) {\n                return d.startAngle + (d.endAngle - d.startAngle) / 2;\n            }\n\n            text.transition().duration(1000)\n                .attrTween(\"transform\", function(d) {\n                    this._current = this._current || d;\n                    var interpolate = d3.interpolate(this._current, d);\n                    this._current = interpolate(0);\n                    return function(t) {\n                        var d2 = interpolate(t);\n                        var pos = outerArc.centroid(d2);\n                        pos[0] = radius * (midAngle(d2) < Math.PI ? 1 : -1);\n                        return \"translate(\" + pos + \")\";\n                    };\n                })\n                .styleTween(\"text-anchor\", function(d) {\n                    this._current = this._current || d;\n                    var interpolate = d3.interpolate(this._current, d);\n                    this._current = interpolate(0);\n                    return function(t) {\n                        var d2 = interpolate(t);\n                        return midAngle(d2) < Math.PI ? \"start\" : \"end\";\n                    };\n                });\n\n            text.exit()\n                .remove();\n\n            /* ------- SLICE TO TEXT POLYLINES -------*/\n\n            var polyline = svg.select(\".lines\").selectAll(\"polyline\")\n                .data(pie(data), key);\n\n            polyline.enter()\n                .append(\"polyline\");\n\n            polyline.transition().duration(1000)\n                .attrTween(\"points\", function(d) {\n                    this._current = this._current || d;\n                    var interpolate = d3.interpolate(this._current, d);\n                    this._current = interpolate(0);\n                    return function(t) {\n                        var d2 = interpolate(t);\n                        var pos = outerArc.centroid(d2);\n                        pos[0] = radius * 0.95 * (midAngle(d2) < Math.PI ? 1 : -1);\n                        return [arc.centroid(d2), outerArc.centroid(d2), pos];\n                    };\n                });\n\n            polyline.exit()\n                .remove();\n        };\n    </script>\n</body>\n","undoManager":{"mark":33,"position":33,"stack":[[{"start":{"row":0,"column":0},"end":{"row":178,"column":7},"action":"insert","lines":["<!DOCTYPE html>","<meta charset=\"utf-8\">","<style>","","body {","  font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif;","  width: 960px;","  height: 500px;","  position: relative;","}","","svg {","\twidth: 100%;","\theight: 100%;","}","","path.slice{","\tstroke-width:2px;","}","","polyline{","\topacity: .3;","\tstroke: black;","\tstroke-width: 2px;","\tfill: none;","}","","</style>","<body>","<button class=\"randomize\">randomize</button>","","<script src=\"https://d3js.org/d3.v3.min.js\"></script>","<script>","","var svg = d3.select(\"body\")","\t.append(\"svg\")","\t.append(\"g\")","","svg.append(\"g\")","\t.attr(\"class\", \"slices\");","svg.append(\"g\")","\t.attr(\"class\", \"labels\");","svg.append(\"g\")","\t.attr(\"class\", \"lines\");","","var width = 960,","    height = 450,","\tradius = Math.min(width, height) / 2;","","var pie = d3.layout.pie()","\t.sort(null)","\t.value(function(d) {","\t\treturn d.value;","\t});","","var arc = d3.svg.arc()","\t.outerRadius(radius * 0.8)","\t.innerRadius(radius * 0.4);","","var outerArc = d3.svg.arc()","\t.innerRadius(radius * 0.9)","\t.outerRadius(radius * 0.9);","","svg.attr(\"transform\", \"translate(\" + width / 2 + \",\" + height / 2 + \")\");","","var key = function(d){ return d.data.label; };","","var color = d3.scale.ordinal()","\t.domain([\"Lorem ipsum\", \"dolor sit\", \"amet\", \"consectetur\", \"adipisicing\", \"elit\", \"sed\", \"do\", \"eiusmod\", \"tempor\", \"incididunt\"])","\t.range([\"#98abc5\", \"#8a89a6\", \"#7b6888\", \"#6b486b\", \"#a05d56\", \"#d0743c\", \"#ff8c00\"]);","","function randomData (){","\tvar labels = color.domain();","\treturn labels.map(function(label){","\t\treturn { label: label, value: Math.random() }","\t});","}","","change(randomData());","","d3.select(\".randomize\")","\t.on(\"click\", function(){","\t\tchange(randomData());","\t});","","","function change(data) {","","\t/* ------- PIE SLICES -------*/","\tvar slice = svg.select(\".slices\").selectAll(\"path.slice\")","\t\t.data(pie(data), key);","","\tslice.enter()","\t\t.insert(\"path\")","\t\t.style(\"fill\", function(d) { return color(d.data.label); })","\t\t.attr(\"class\", \"slice\");","","\tslice\t\t","\t\t.transition().duration(1000)","\t\t.attrTween(\"d\", function(d) {","\t\t\tthis._current = this._current || d;","\t\t\tvar interpolate = d3.interpolate(this._current, d);","\t\t\tthis._current = interpolate(0);","\t\t\treturn function(t) {","\t\t\t\treturn arc(interpolate(t));","\t\t\t};","\t\t})","","\tslice.exit()","\t\t.remove();","","\t/* ------- TEXT LABELS -------*/","","\tvar text = svg.select(\".labels\").selectAll(\"text\")","\t\t.data(pie(data), key);","","\ttext.enter()","\t\t.append(\"text\")","\t\t.attr(\"dy\", \".35em\")","\t\t.text(function(d) {","\t\t\treturn d.data.label;","\t\t});","\t","\tfunction midAngle(d){","\t\treturn d.startAngle + (d.endAngle - d.startAngle)/2;","\t}","","\ttext.transition().duration(1000)","\t\t.attrTween(\"transform\", function(d) {","\t\t\tthis._current = this._current || d;","\t\t\tvar interpolate = d3.interpolate(this._current, d);","\t\t\tthis._current = interpolate(0);","\t\t\treturn function(t) {","\t\t\t\tvar d2 = interpolate(t);","\t\t\t\tvar pos = outerArc.centroid(d2);","\t\t\t\tpos[0] = radius * (midAngle(d2) < Math.PI ? 1 : -1);","\t\t\t\treturn \"translate(\"+ pos +\")\";","\t\t\t};","\t\t})","\t\t.styleTween(\"text-anchor\", function(d){","\t\t\tthis._current = this._current || d;","\t\t\tvar interpolate = d3.interpolate(this._current, d);","\t\t\tthis._current = interpolate(0);","\t\t\treturn function(t) {","\t\t\t\tvar d2 = interpolate(t);","\t\t\t\treturn midAngle(d2) < Math.PI ? \"start\":\"end\";","\t\t\t};","\t\t});","","\ttext.exit()","\t\t.remove();","","\t/* ------- SLICE TO TEXT POLYLINES -------*/","","\tvar polyline = svg.select(\".lines\").selectAll(\"polyline\")","\t\t.data(pie(data), key);","\t","\tpolyline.enter()","\t\t.append(\"polyline\");","","\tpolyline.transition().duration(1000)","\t\t.attrTween(\"points\", function(d){","\t\t\tthis._current = this._current || d;","\t\t\tvar interpolate = d3.interpolate(this._current, d);","\t\t\tthis._current = interpolate(0);","\t\t\treturn function(t) {","\t\t\t\tvar d2 = interpolate(t);","\t\t\t\tvar pos = outerArc.centroid(d2);","\t\t\t\tpos[0] = radius * 0.95 * (midAngle(d2) < Math.PI ? 1 : -1);","\t\t\t\treturn [arc.centroid(d2), outerArc.centroid(d2), pos];","\t\t\t};\t\t\t","\t\t});","\t","\tpolyline.exit()","\t\t.remove();","};","","</script>","</body>"],"id":1}],[{"start":{"row":3,"column":0},"end":{"row":4,"column":0},"action":"remove","lines":["",""],"id":2},{"start":{"row":3,"column":0},"end":{"row":3,"column":4},"action":"insert","lines":["    "]},{"start":{"row":4,"column":0},"end":{"row":4,"column":6},"action":"insert","lines":["      "]},{"start":{"row":5,"column":0},"end":{"row":5,"column":6},"action":"insert","lines":["      "]},{"start":{"row":6,"column":2},"end":{"row":6,"column":8},"action":"insert","lines":["      "]},{"start":{"row":7,"column":2},"end":{"row":7,"column":8},"action":"insert","lines":["      "]},{"start":{"row":8,"column":0},"end":{"row":8,"column":4},"action":"insert","lines":["    "]},{"start":{"row":10,"column":0},"end":{"row":10,"column":4},"action":"insert","lines":["    "]},{"start":{"row":11,"column":0},"end":{"row":11,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":11,"column":0},"end":{"row":11,"column":8},"action":"insert","lines":["        "]},{"start":{"row":12,"column":0},"end":{"row":12,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":12,"column":0},"end":{"row":12,"column":8},"action":"insert","lines":["        "]},{"start":{"row":13,"column":0},"end":{"row":13,"column":4},"action":"insert","lines":["    "]},{"start":{"row":15,"column":0},"end":{"row":15,"column":4},"action":"insert","lines":["    "]},{"start":{"row":15,"column":14},"end":{"row":15,"column":15},"action":"insert","lines":[" "]},{"start":{"row":16,"column":0},"end":{"row":16,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":16,"column":0},"end":{"row":16,"column":8},"action":"insert","lines":["        "]},{"start":{"row":16,"column":21},"end":{"row":16,"column":22},"action":"insert","lines":[" "]},{"start":{"row":17,"column":0},"end":{"row":17,"column":4},"action":"insert","lines":["    "]},{"start":{"row":19,"column":0},"end":{"row":19,"column":4},"action":"insert","lines":["    "]},{"start":{"row":19,"column":12},"end":{"row":19,"column":13},"action":"insert","lines":[" "]},{"start":{"row":20,"column":0},"end":{"row":20,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":20,"column":0},"end":{"row":20,"column":8},"action":"insert","lines":["        "]},{"start":{"row":21,"column":0},"end":{"row":21,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":21,"column":0},"end":{"row":21,"column":8},"action":"insert","lines":["        "]},{"start":{"row":22,"column":0},"end":{"row":22,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":22,"column":0},"end":{"row":22,"column":8},"action":"insert","lines":["        "]},{"start":{"row":23,"column":0},"end":{"row":23,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":23,"column":0},"end":{"row":23,"column":8},"action":"insert","lines":["        "]},{"start":{"row":24,"column":0},"end":{"row":24,"column":4},"action":"insert","lines":["    "]},{"start":{"row":24,"column":5},"end":{"row":25,"column":0},"action":"remove","lines":["",""]},{"start":{"row":26,"column":0},"end":{"row":27,"column":0},"action":"insert","lines":["",""]},{"start":{"row":28,"column":0},"end":{"row":28,"column":4},"action":"insert","lines":["    "]},{"start":{"row":30,"column":0},"end":{"row":30,"column":4},"action":"insert","lines":["    "]},{"start":{"row":31,"column":0},"end":{"row":31,"column":4},"action":"insert","lines":["    "]},{"start":{"row":32,"column":0},"end":{"row":33,"column":0},"action":"remove","lines":["",""]},{"start":{"row":32,"column":0},"end":{"row":32,"column":8},"action":"insert","lines":["        "]},{"start":{"row":33,"column":0},"end":{"row":33,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":33,"column":0},"end":{"row":33,"column":12},"action":"insert","lines":["            "]},{"start":{"row":34,"column":0},"end":{"row":34,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":34,"column":0},"end":{"row":34,"column":12},"action":"insert","lines":["            "]},{"start":{"row":36,"column":0},"end":{"row":36,"column":8},"action":"insert","lines":["        "]},{"start":{"row":37,"column":0},"end":{"row":37,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":37,"column":0},"end":{"row":37,"column":12},"action":"insert","lines":["            "]},{"start":{"row":38,"column":0},"end":{"row":38,"column":8},"action":"insert","lines":["        "]},{"start":{"row":39,"column":0},"end":{"row":39,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":39,"column":0},"end":{"row":39,"column":12},"action":"insert","lines":["            "]},{"start":{"row":40,"column":0},"end":{"row":40,"column":8},"action":"insert","lines":["        "]},{"start":{"row":41,"column":0},"end":{"row":41,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":41,"column":0},"end":{"row":41,"column":12},"action":"insert","lines":["            "]},{"start":{"row":43,"column":0},"end":{"row":43,"column":8},"action":"insert","lines":["        "]},{"start":{"row":44,"column":4},"end":{"row":44,"column":12},"action":"insert","lines":["        "]},{"start":{"row":45,"column":0},"end":{"row":45,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":45,"column":0},"end":{"row":45,"column":12},"action":"insert","lines":["            "]},{"start":{"row":47,"column":0},"end":{"row":47,"column":8},"action":"insert","lines":["        "]},{"start":{"row":48,"column":0},"end":{"row":48,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":48,"column":0},"end":{"row":48,"column":12},"action":"insert","lines":["            "]},{"start":{"row":49,"column":0},"end":{"row":49,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":49,"column":0},"end":{"row":49,"column":12},"action":"insert","lines":["            "]},{"start":{"row":50,"column":0},"end":{"row":50,"column":2},"action":"remove","lines":["\t\t"]},{"start":{"row":50,"column":0},"end":{"row":50,"column":16},"action":"insert","lines":["                "]},{"start":{"row":51,"column":0},"end":{"row":51,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":51,"column":0},"end":{"row":51,"column":12},"action":"insert","lines":["            "]},{"start":{"row":53,"column":0},"end":{"row":53,"column":8},"action":"insert","lines":["        "]},{"start":{"row":54,"column":0},"end":{"row":54,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":54,"column":0},"end":{"row":54,"column":12},"action":"insert","lines":["            "]},{"start":{"row":55,"column":0},"end":{"row":55,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":55,"column":0},"end":{"row":55,"column":12},"action":"insert","lines":["            "]},{"start":{"row":57,"column":0},"end":{"row":57,"column":8},"action":"insert","lines":["        "]},{"start":{"row":58,"column":0},"end":{"row":58,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":58,"column":0},"end":{"row":58,"column":12},"action":"insert","lines":["            "]},{"start":{"row":59,"column":0},"end":{"row":59,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":59,"column":0},"end":{"row":59,"column":12},"action":"insert","lines":["            "]},{"start":{"row":61,"column":0},"end":{"row":61,"column":8},"action":"insert","lines":["        "]},{"start":{"row":63,"column":0},"end":{"row":63,"column":8},"action":"insert","lines":["        "]},{"start":{"row":63,"column":29},"end":{"row":63,"column":30},"action":"insert","lines":[" "]},{"start":{"row":65,"column":0},"end":{"row":65,"column":8},"action":"insert","lines":["        "]},{"start":{"row":66,"column":0},"end":{"row":66,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":66,"column":0},"end":{"row":66,"column":12},"action":"insert","lines":["            "]},{"start":{"row":67,"column":0},"end":{"row":67,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":67,"column":0},"end":{"row":67,"column":12},"action":"insert","lines":["            "]},{"start":{"row":69,"column":0},"end":{"row":69,"column":8},"action":"insert","lines":["        "]},{"start":{"row":69,"column":27},"end":{"row":69,"column":28},"action":"remove","lines":[" "]},{"start":{"row":69,"column":29},"end":{"row":69,"column":30},"action":"insert","lines":[" "]},{"start":{"row":70,"column":0},"end":{"row":70,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":70,"column":0},"end":{"row":70,"column":12},"action":"insert","lines":["            "]},{"start":{"row":71,"column":0},"end":{"row":71,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":71,"column":0},"end":{"row":71,"column":12},"action":"insert","lines":["            "]},{"start":{"row":71,"column":45},"end":{"row":71,"column":46},"action":"insert","lines":[" "]},{"start":{"row":72,"column":0},"end":{"row":72,"column":2},"action":"remove","lines":["\t\t"]},{"start":{"row":72,"column":0},"end":{"row":72,"column":16},"action":"insert","lines":["                "]},{"start":{"row":73,"column":0},"end":{"row":73,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":73,"column":0},"end":{"row":73,"column":12},"action":"insert","lines":["            "]},{"start":{"row":74,"column":0},"end":{"row":74,"column":8},"action":"insert","lines":["        "]},{"start":{"row":76,"column":0},"end":{"row":76,"column":8},"action":"insert","lines":["        "]},{"start":{"row":78,"column":0},"end":{"row":78,"column":8},"action":"insert","lines":["        "]},{"start":{"row":79,"column":0},"end":{"row":79,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":79,"column":0},"end":{"row":79,"column":12},"action":"insert","lines":["            "]},{"start":{"row":79,"column":35},"end":{"row":79,"column":36},"action":"insert","lines":[" "]},{"start":{"row":80,"column":0},"end":{"row":80,"column":2},"action":"remove","lines":["\t\t"]},{"start":{"row":80,"column":0},"end":{"row":80,"column":16},"action":"insert","lines":["                "]},{"start":{"row":81,"column":0},"end":{"row":81,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":81,"column":0},"end":{"row":81,"column":12},"action":"insert","lines":["            "]},{"start":{"row":84,"column":0},"end":{"row":84,"column":8},"action":"insert","lines":["        "]},{"start":{"row":86,"column":0},"end":{"row":86,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":86,"column":0},"end":{"row":86,"column":12},"action":"insert","lines":["            "]},{"start":{"row":87,"column":0},"end":{"row":87,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":87,"column":0},"end":{"row":87,"column":12},"action":"insert","lines":["            "]},{"start":{"row":88,"column":0},"end":{"row":88,"column":2},"action":"remove","lines":["\t\t"]},{"start":{"row":88,"column":0},"end":{"row":88,"column":16},"action":"insert","lines":["                "]},{"start":{"row":90,"column":0},"end":{"row":90,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":90,"column":0},"end":{"row":90,"column":12},"action":"insert","lines":["            "]},{"start":{"row":91,"column":0},"end":{"row":91,"column":2},"action":"remove","lines":["\t\t"]},{"start":{"row":91,"column":0},"end":{"row":91,"column":16},"action":"insert","lines":["                "]},{"start":{"row":92,"column":0},"end":{"row":92,"column":2},"action":"remove","lines":["\t\t"]},{"start":{"row":92,"column":0},"end":{"row":92,"column":16},"action":"insert","lines":["                "]},{"start":{"row":93,"column":0},"end":{"row":93,"column":2},"action":"remove","lines":["\t\t"]},{"start":{"row":93,"column":0},"end":{"row":93,"column":16},"action":"insert","lines":["                "]},{"start":{"row":95,"column":0},"end":{"row":95,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":95,"column":0},"end":{"row":95,"column":12},"action":"insert","lines":["            "]},{"start":{"row":95,"column":17},"end":{"row":95,"column":19},"action":"remove","lines":["\t\t"]},{"start":{"row":96,"column":0},"end":{"row":96,"column":2},"action":"remove","lines":["\t\t"]},{"start":{"row":96,"column":0},"end":{"row":96,"column":16},"action":"insert","lines":["                "]},{"start":{"row":97,"column":0},"end":{"row":97,"column":2},"action":"remove","lines":["\t\t"]},{"start":{"row":97,"column":0},"end":{"row":97,"column":16},"action":"insert","lines":["                "]},{"start":{"row":98,"column":0},"end":{"row":98,"column":3},"action":"remove","lines":["\t\t\t"]},{"start":{"row":98,"column":0},"end":{"row":98,"column":20},"action":"insert","lines":["                    "]},{"start":{"row":99,"column":0},"end":{"row":99,"column":3},"action":"remove","lines":["\t\t\t"]},{"start":{"row":99,"column":0},"end":{"row":99,"column":20},"action":"insert","lines":["                    "]},{"start":{"row":100,"column":0},"end":{"row":100,"column":3},"action":"remove","lines":["\t\t\t"]},{"start":{"row":100,"column":0},"end":{"row":100,"column":20},"action":"insert","lines":["                    "]},{"start":{"row":101,"column":0},"end":{"row":101,"column":3},"action":"remove","lines":["\t\t\t"]},{"start":{"row":101,"column":0},"end":{"row":101,"column":20},"action":"insert","lines":["                    "]},{"start":{"row":102,"column":0},"end":{"row":102,"column":4},"action":"remove","lines":["\t\t\t\t"]},{"start":{"row":102,"column":0},"end":{"row":102,"column":24},"action":"insert","lines":["                        "]},{"start":{"row":103,"column":0},"end":{"row":103,"column":3},"action":"remove","lines":["\t\t\t"]},{"start":{"row":103,"column":0},"end":{"row":103,"column":20},"action":"insert","lines":["                    "]},{"start":{"row":104,"column":0},"end":{"row":104,"column":2},"action":"remove","lines":["\t\t"]},{"start":{"row":104,"column":0},"end":{"row":104,"column":16},"action":"insert","lines":["                "]},{"start":{"row":106,"column":0},"end":{"row":106,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":106,"column":0},"end":{"row":106,"column":12},"action":"insert","lines":["            "]},{"start":{"row":107,"column":0},"end":{"row":107,"column":2},"action":"remove","lines":["\t\t"]},{"start":{"row":107,"column":0},"end":{"row":107,"column":16},"action":"insert","lines":["                "]},{"start":{"row":109,"column":0},"end":{"row":109,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":109,"column":0},"end":{"row":109,"column":12},"action":"insert","lines":["            "]},{"start":{"row":111,"column":0},"end":{"row":111,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":111,"column":0},"end":{"row":111,"column":12},"action":"insert","lines":["            "]},{"start":{"row":112,"column":0},"end":{"row":112,"column":2},"action":"remove","lines":["\t\t"]},{"start":{"row":112,"column":0},"end":{"row":112,"column":16},"action":"insert","lines":["                "]},{"start":{"row":114,"column":0},"end":{"row":114,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":114,"column":0},"end":{"row":114,"column":12},"action":"insert","lines":["            "]},{"start":{"row":115,"column":0},"end":{"row":115,"column":2},"action":"remove","lines":["\t\t"]},{"start":{"row":115,"column":0},"end":{"row":115,"column":16},"action":"insert","lines":["                "]},{"start":{"row":116,"column":0},"end":{"row":176,"column":7},"action":"remove","lines":["\t\t.attr(\"dy\", \".35em\")","\t\t.text(function(d) {","\t\t\treturn d.data.label;","\t\t});","\t","\tfunction midAngle(d){","\t\treturn d.startAngle + (d.endAngle - d.startAngle)/2;","\t}","","\ttext.transition().duration(1000)","\t\t.attrTween(\"transform\", function(d) {","\t\t\tthis._current = this._current || d;","\t\t\tvar interpolate = d3.interpolate(this._current, d);","\t\t\tthis._current = interpolate(0);","\t\t\treturn function(t) {","\t\t\t\tvar d2 = interpolate(t);","\t\t\t\tvar pos = outerArc.centroid(d2);","\t\t\t\tpos[0] = radius * (midAngle(d2) < Math.PI ? 1 : -1);","\t\t\t\treturn \"translate(\"+ pos +\")\";","\t\t\t};","\t\t})","\t\t.styleTween(\"text-anchor\", function(d){","\t\t\tthis._current = this._current || d;","\t\t\tvar interpolate = d3.interpolate(this._current, d);","\t\t\tthis._current = interpolate(0);","\t\t\treturn function(t) {","\t\t\t\tvar d2 = interpolate(t);","\t\t\t\treturn midAngle(d2) < Math.PI ? \"start\":\"end\";","\t\t\t};","\t\t});","","\ttext.exit()","\t\t.remove();","","\t/* ------- SLICE TO TEXT POLYLINES -------*/","","\tvar polyline = svg.select(\".lines\").selectAll(\"polyline\")","\t\t.data(pie(data), key);","\t","\tpolyline.enter()","\t\t.append(\"polyline\");","","\tpolyline.transition().duration(1000)","\t\t.attrTween(\"points\", function(d){","\t\t\tthis._current = this._current || d;","\t\t\tvar interpolate = d3.interpolate(this._current, d);","\t\t\tthis._current = interpolate(0);","\t\t\treturn function(t) {","\t\t\t\tvar d2 = interpolate(t);","\t\t\t\tvar pos = outerArc.centroid(d2);","\t\t\t\tpos[0] = radius * 0.95 * (midAngle(d2) < Math.PI ? 1 : -1);","\t\t\t\treturn [arc.centroid(d2), outerArc.centroid(d2), pos];","\t\t\t};\t\t\t","\t\t});","\t","\tpolyline.exit()","\t\t.remove();","};","","</script>","</body>"]},{"start":{"row":116,"column":0},"end":{"row":176,"column":0},"action":"insert","lines":["                .attr(\"dy\", \".35em\")","                .text(function(d) {","                    return d.data.label;","                });","","            function midAngle(d) {","                return d.startAngle + (d.endAngle - d.startAngle) / 2;","            }","","            text.transition().duration(1000)","                .attrTween(\"transform\", function(d) {","                    this._current = this._current || d;","                    var interpolate = d3.interpolate(this._current, d);","                    this._current = interpolate(0);","                    return function(t) {","                        var d2 = interpolate(t);","                        var pos = outerArc.centroid(d2);","                        pos[0] = radius * (midAngle(d2) < Math.PI ? 1 : -1);","                        return \"translate(\" + pos + \")\";","                    };","                })","                .styleTween(\"text-anchor\", function(d) {","                    this._current = this._current || d;","                    var interpolate = d3.interpolate(this._current, d);","                    this._current = interpolate(0);","                    return function(t) {","                        var d2 = interpolate(t);","                        return midAngle(d2) < Math.PI ? \"start\" : \"end\";","                    };","                });","","            text.exit()","                .remove();","","            /* ------- SLICE TO TEXT POLYLINES -------*/","","            var polyline = svg.select(\".lines\").selectAll(\"polyline\")","                .data(pie(data), key);","","            polyline.enter()","                .append(\"polyline\");","","            polyline.transition().duration(1000)","                .attrTween(\"points\", function(d) {","                    this._current = this._current || d;","                    var interpolate = d3.interpolate(this._current, d);","                    this._current = interpolate(0);","                    return function(t) {","                        var d2 = interpolate(t);","                        var pos = outerArc.centroid(d2);","                        pos[0] = radius * 0.95 * (midAngle(d2) < Math.PI ? 1 : -1);","                        return [arc.centroid(d2), outerArc.centroid(d2), pos];","                    };","                });","","            polyline.exit()","                .remove();","        };","    </script>","</body>",""]}],[{"start":{"row":30,"column":38},"end":{"row":30,"column":39},"action":"remove","lines":["3"],"id":3},{"start":{"row":30,"column":37},"end":{"row":30,"column":38},"action":"remove","lines":["v"]},{"start":{"row":30,"column":36},"end":{"row":30,"column":37},"action":"remove","lines":["."]}],[{"start":{"row":30,"column":17},"end":{"row":30,"column":33},"action":"remove","lines":["https://d3js.org"],"id":4},{"start":{"row":30,"column":17},"end":{"row":30,"column":18},"action":"insert","lines":["s"]},{"start":{"row":30,"column":18},"end":{"row":30,"column":19},"action":"insert","lines":["t"]},{"start":{"row":30,"column":19},"end":{"row":30,"column":20},"action":"insert","lines":["a"]},{"start":{"row":30,"column":20},"end":{"row":30,"column":21},"action":"insert","lines":["t"]},{"start":{"row":30,"column":21},"end":{"row":30,"column":22},"action":"insert","lines":["i"]},{"start":{"row":30,"column":22},"end":{"row":30,"column":23},"action":"insert","lines":["c"]},{"start":{"row":30,"column":23},"end":{"row":30,"column":24},"action":"insert","lines":["/"]}],[{"start":{"row":30,"column":24},"end":{"row":30,"column":25},"action":"insert","lines":["j"],"id":5},{"start":{"row":30,"column":25},"end":{"row":30,"column":26},"action":"insert","lines":["s"]},{"start":{"row":30,"column":26},"end":{"row":30,"column":27},"action":"insert","lines":["/"]},{"start":{"row":30,"column":27},"end":{"row":30,"column":28},"action":"insert","lines":["e"]},{"start":{"row":30,"column":28},"end":{"row":30,"column":29},"action":"insert","lines":["x"]},{"start":{"row":30,"column":29},"end":{"row":30,"column":30},"action":"insert","lines":["t"]},{"start":{"row":30,"column":30},"end":{"row":30,"column":31},"action":"insert","lines":["e"]},{"start":{"row":30,"column":31},"end":{"row":30,"column":32},"action":"insert","lines":["r"]},{"start":{"row":30,"column":32},"end":{"row":30,"column":33},"action":"insert","lines":["n"]},{"start":{"row":30,"column":33},"end":{"row":30,"column":34},"action":"insert","lines":["a"]},{"start":{"row":30,"column":34},"end":{"row":30,"column":35},"action":"insert","lines":["l"]}],[{"start":{"row":43,"column":20},"end":{"row":43,"column":23},"action":"remove","lines":["960"],"id":11},{"start":{"row":43,"column":20},"end":{"row":43,"column":21},"action":"insert","lines":["5"]},{"start":{"row":43,"column":21},"end":{"row":43,"column":22},"action":"insert","lines":["0"]},{"start":{"row":43,"column":22},"end":{"row":43,"column":23},"action":"insert","lines":["0"]}],[{"start":{"row":44,"column":21},"end":{"row":44,"column":24},"action":"remove","lines":["450"],"id":12},{"start":{"row":44,"column":21},"end":{"row":44,"column":22},"action":"insert","lines":["3"]},{"start":{"row":44,"column":22},"end":{"row":44,"column":23},"action":"insert","lines":["5"]},{"start":{"row":44,"column":23},"end":{"row":44,"column":24},"action":"insert","lines":["0"]}],[{"start":{"row":31,"column":12},"end":{"row":32,"column":0},"action":"insert","lines":["",""],"id":17},{"start":{"row":32,"column":0},"end":{"row":32,"column":4},"action":"insert","lines":["    "]},{"start":{"row":32,"column":4},"end":{"row":33,"column":0},"action":"insert","lines":["",""]},{"start":{"row":33,"column":0},"end":{"row":33,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":32,"column":4},"end":{"row":32,"column":5},"action":"insert","lines":["v"],"id":18},{"start":{"row":32,"column":5},"end":{"row":32,"column":6},"action":"insert","lines":["a"]},{"start":{"row":32,"column":6},"end":{"row":32,"column":7},"action":"insert","lines":["r"]}],[{"start":{"row":32,"column":7},"end":{"row":32,"column":8},"action":"insert","lines":[" "],"id":19},{"start":{"row":32,"column":8},"end":{"row":32,"column":9},"action":"insert","lines":["n"]},{"start":{"row":32,"column":9},"end":{"row":32,"column":10},"action":"insert","lines":["d"]},{"start":{"row":32,"column":10},"end":{"row":32,"column":11},"action":"insert","lines":["x"]}],[{"start":{"row":32,"column":11},"end":{"row":32,"column":12},"action":"insert","lines":[" "],"id":20},{"start":{"row":32,"column":12},"end":{"row":32,"column":13},"action":"insert","lines":["="]}],[{"start":{"row":32,"column":13},"end":{"row":32,"column":14},"action":"insert","lines":[" "],"id":21},{"start":{"row":32,"column":14},"end":{"row":32,"column":15},"action":"insert","lines":["d"]},{"start":{"row":32,"column":15},"end":{"row":32,"column":16},"action":"insert","lines":["i"]},{"start":{"row":32,"column":16},"end":{"row":32,"column":17},"action":"insert","lines":["m"]},{"start":{"row":32,"column":17},"end":{"row":32,"column":18},"action":"insert","lines":["e"]},{"start":{"row":32,"column":18},"end":{"row":32,"column":19},"action":"insert","lines":["n"]},{"start":{"row":32,"column":19},"end":{"row":32,"column":20},"action":"insert","lines":["s"]},{"start":{"row":32,"column":20},"end":{"row":32,"column":21},"action":"insert","lines":["i"]},{"start":{"row":32,"column":21},"end":{"row":32,"column":22},"action":"insert","lines":["o"]},{"start":{"row":32,"column":22},"end":{"row":32,"column":23},"action":"insert","lines":["n"]}],[{"start":{"row":32,"column":23},"end":{"row":32,"column":24},"action":"insert","lines":["."],"id":22}],[{"start":{"row":32,"column":23},"end":{"row":32,"column":24},"action":"remove","lines":["."],"id":23}],[{"start":{"row":32,"column":23},"end":{"row":32,"column":25},"action":"insert","lines":["()"],"id":24}],[{"start":{"row":31,"column":12},"end":{"row":32,"column":25},"action":"remove","lines":["","    var ndx = dimension()"],"id":25},{"start":{"row":31,"column":12},"end":{"row":32,"column":38},"action":"insert","lines":["","    var ndx = crossfilter(budgetData);"]}],[{"start":{"row":32,"column":38},"end":{"row":33,"column":0},"action":"insert","lines":["",""],"id":26},{"start":{"row":33,"column":0},"end":{"row":33,"column":4},"action":"insert","lines":["    "]},{"start":{"row":33,"column":4},"end":{"row":34,"column":0},"action":"insert","lines":["",""]},{"start":{"row":34,"column":0},"end":{"row":34,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":34,"column":4},"end":{"row":35,"column":50},"action":"insert","lines":["","    var dim = ndx.dimension(dc.pluck('category'));"],"id":27}],[{"start":{"row":33,"column":0},"end":{"row":33,"column":4},"action":"remove","lines":["    "],"id":28},{"start":{"row":32,"column":38},"end":{"row":33,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":31,"column":12},"end":{"row":34,"column":50},"action":"remove","lines":["","    var ndx = crossfilter(budgetData);","    ","    var dim = ndx.dimension(dc.pluck('category'));"],"id":29}],[{"start":{"row":31,"column":12},"end":{"row":32,"column":0},"action":"insert","lines":["",""],"id":31},{"start":{"row":32,"column":0},"end":{"row":32,"column":4},"action":"insert","lines":["    "]},{"start":{"row":32,"column":4},"end":{"row":32,"column":5},"action":"insert","lines":["v"]},{"start":{"row":32,"column":5},"end":{"row":32,"column":6},"action":"insert","lines":["a"]},{"start":{"row":32,"column":6},"end":{"row":32,"column":7},"action":"insert","lines":["r"]}],[{"start":{"row":32,"column":7},"end":{"row":32,"column":8},"action":"insert","lines":[" "],"id":32},{"start":{"row":32,"column":8},"end":{"row":32,"column":9},"action":"insert","lines":["n"]},{"start":{"row":32,"column":9},"end":{"row":32,"column":10},"action":"insert","lines":["d"]},{"start":{"row":32,"column":10},"end":{"row":32,"column":11},"action":"insert","lines":["x"]}],[{"start":{"row":32,"column":11},"end":{"row":32,"column":12},"action":"insert","lines":[" "],"id":33},{"start":{"row":32,"column":12},"end":{"row":32,"column":13},"action":"insert","lines":["="]}],[{"start":{"row":32,"column":13},"end":{"row":32,"column":14},"action":"insert","lines":[" "],"id":34},{"start":{"row":32,"column":14},"end":{"row":32,"column":15},"action":"insert","lines":["c"]},{"start":{"row":32,"column":15},"end":{"row":32,"column":16},"action":"insert","lines":["o"]},{"start":{"row":32,"column":16},"end":{"row":32,"column":17},"action":"insert","lines":["r"]}],[{"start":{"row":32,"column":16},"end":{"row":32,"column":17},"action":"remove","lines":["r"],"id":35},{"start":{"row":32,"column":15},"end":{"row":32,"column":16},"action":"remove","lines":["o"]}],[{"start":{"row":32,"column":15},"end":{"row":32,"column":16},"action":"insert","lines":["r"],"id":36},{"start":{"row":32,"column":16},"end":{"row":32,"column":17},"action":"insert","lines":["o"]},{"start":{"row":32,"column":17},"end":{"row":32,"column":18},"action":"insert","lines":["s"]}],[{"start":{"row":32,"column":14},"end":{"row":32,"column":18},"action":"remove","lines":["cros"],"id":37},{"start":{"row":32,"column":14},"end":{"row":32,"column":25},"action":"insert","lines":["crossfilter"]}],[{"start":{"row":32,"column":25},"end":{"row":32,"column":27},"action":"insert","lines":["()"],"id":38}],[{"start":{"row":32,"column":26},"end":{"row":32,"column":27},"action":"insert","lines":["b"],"id":39},{"start":{"row":32,"column":27},"end":{"row":32,"column":28},"action":"insert","lines":["u"]},{"start":{"row":32,"column":28},"end":{"row":32,"column":29},"action":"insert","lines":["d"]}],[{"start":{"row":32,"column":26},"end":{"row":32,"column":29},"action":"remove","lines":["bud"],"id":40},{"start":{"row":32,"column":26},"end":{"row":32,"column":36},"action":"insert","lines":["budgetData"]}],[{"start":{"row":32,"column":36},"end":{"row":32,"column":37},"action":"insert","lines":["0"],"id":41}],[{"start":{"row":32,"column":36},"end":{"row":32,"column":37},"action":"remove","lines":["0"],"id":42}],[{"start":{"row":32,"column":37},"end":{"row":32,"column":38},"action":"insert","lines":[";"],"id":43}],[{"start":{"row":31,"column":12},"end":{"row":32,"column":38},"action":"remove","lines":["","    var ndx = crossfilter(budgetData);"],"id":44}],[{"start":{"row":64,"column":55},"end":{"row":68,"column":98},"action":"remove","lines":["","","        var color = d3.scale.ordinal()","            .domain([\"Lorem ipsum\", \"dolor sit\", \"amet\", \"consectetur\", \"adipisicing\", \"elit\", \"sed\", \"do\", \"eiusmod\", \"tempor\", \"incididunt\"])","            .range([\"#98abc5\", \"#8a89a6\", \"#7b6888\", \"#6b486b\", \"#a05d56\", \"#d0743c\", \"#ff8c00\"]);"],"id":45}]]},"ace":{"folds":[{"start":{"row":2,"column":7},"end":{"row":25,"column":0},"placeholder":"..."}],"scrolltop":406.5,"scrollleft":0,"selection":{"start":{"row":68,"column":98},"end":{"row":68,"column":98},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":true,"wrapToView":true},"firstLineState":{"row":53,"state":"js-start","mode":"ace/mode/html"}},"timestamp":1573048931474}